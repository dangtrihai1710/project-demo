<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản trị - New Computer Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-dark sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="text-center mb-4">
                        <h5 class="text-white">New Computer Store</h5>
                        <p class="text-white-50">Trang quản trị</p>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#dashboard-section" data-section="dashboard">
                                <i class="bi bi-speedometer2 me-2"></i>Tổng quan
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#products-section" data-section="products">
                                <i class="bi bi-box me-2"></i>Quản lý sản phẩm
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#categories-section" data-section="categories">
                                <i class="bi bi-diagram-3 me-2"></i>Quản lý danh mục
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#orders-section" data-section="orders">
                                <i class="bi bi-cart-check me-2"></i>Đơn hàng
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#revenue-section" data-section="revenue">
                                <i class="bi bi-graph-up me-2"></i>Doanh thu
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#users-section" data-section="users">
                                <i class="bi bi-people me-2"></i>Quản lý người dùng
                            </a>
                        </li>
                    </ul>
                    <hr class="text-white-50">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="/" target="_blank">
                                <i class="bi bi-house me-2"></i>Xem cửa hàng
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="logout-btn">
                                <i class="bi bi-box-arrow-right me-2"></i>Đăng xuất
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <!-- Header -->
                <header class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom">
                    <button class="btn d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar">
                        <i class="bi bi-list"></i>
                    </button>
                    <h1 class="h2" id="section-title">Tổng quan</h1>
                    <div class="dropdown">
                        <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="user-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle fs-4 me-2"></i>
                            <span id="admin-username">Admin</span>
                        </a>
                        <ul class="dropdown-menu text-small shadow" aria-labelledby="user-dropdown">
                            <li><a class="dropdown-item" href="#">Hồ sơ</a></li>
                            <li><a class="dropdown-item" href="#">Cài đặt</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="dropdown-logout">Đăng xuất</a></li>
                        </ul>
                    </div>
                </header>

                <!-- Alert container -->
                <div id="alert-container"></div>

                <!-- Dashboard Section -->
                <section id="dashboard-section" class="section-content active">
                    <!-- Dashboard overview cards -->
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <div class="card text-white bg-primary h-100">
                                <div class="card-body d-flex align-items-center">
                                    <i class="bi bi-basket3 fs-1 me-3"></i>
                                    <div>
                                        <h5 class="card-title">Tổng sản phẩm</h5>
                                        <p class="card-text fs-4" id="total-products">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-white bg-success h-100">
                                <div class="card-body d-flex align-items-center">
                                    <i class="bi bi-cart-check fs-1 me-3"></i>
                                    <div>
                                        <h5 class="card-title">Đơn hàng hôm nay</h5>
                                        <p class="card-text fs-4" id="today-orders">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-white bg-info h-100">
                                <div class="card-body d-flex align-items-center">
                                    <i class="bi bi-people fs-1 me-3"></i>
                                    <div>
                                        <h5 class="card-title">Người dùng</h5>
                                        <p class="card-text fs-4" id="total-users">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-white bg-danger h-100">
                                <div class="card-body d-flex align-items-center">
                                    <i class="bi bi-currency-dollar fs-1 me-3"></i>
                                    <div>
                                        <h5 class="card-title">Doanh thu tháng</h5>
                                        <p class="card-text fs-4" id="monthly-revenue">0 ₫</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="row mb-4">
                        <div class="col-md-8 mb-3">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="card-title">Doanh thu theo tháng</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="revenue-chart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="card-title">Sản phẩm theo danh mục</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="category-chart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent orders table -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">Đơn hàng gần đây</h5>
                            <a href="#orders-section" class="btn btn-sm btn-primary">Xem tất cả</a>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Mã đơn hàng</th>
                                            <th>Khách hàng</th>
                                            <th>Ngày đặt</th>
                                            <th>Trạng thái</th>
                                            <th>Tổng tiền</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recent-orders">
                                        <!-- Recent orders will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Products Section -->
                <section id="products-section" class="section-content">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">Danh sách sản phẩm</h5>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#productModal" id="add-product-btn">
                                <i class="bi bi-plus-circle me-1"></i> Thêm sản phẩm
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="mb-3 d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <label class="me-2">Hiển thị</label>
                                    <select class="form-select form-select-sm" style="width: 70px;" id="products-per-page">
                                        <option value="5">5</option>
                                        <option value="10" selected>10</option>
                                        <option value="20">20</option>
                                        <option value="50">50</option>
                                    </select>
                                    <span class="ms-2">sản phẩm</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <label class="me-2">Danh mục:</label>
                                    <select class="form-select form-select-sm" id="filter-category">
                                        <option value="all">Tất cả</option>
                                        <!-- Categories will be loaded here -->
                                    </select>
                                </div>
                                <div class="d-flex">
                                    <input type="text" class="form-control form-control-sm me-2" placeholder="Tìm kiếm..." id="search-products">
                                    <button class="btn btn-sm btn-outline-secondary" id="search-products-btn">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Hình ảnh</th>
                                            <th>Tên sản phẩm</th>
                                            <th>Danh mục</th>
                                            <th>Giá</th>
                                            <th>Ngày tạo</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="products-list">
                                        <!-- Products will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <div class="text-muted" id="products-showing-info">Hiển thị 1-10 trên 0 sản phẩm</div>
                                <div>
                                    <nav aria-label="Page navigation">
                                        <ul class="pagination pagination-sm" id="products-pagination">
                                            <!-- Pagination will be generated here -->
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Categories Section -->
                <section id="categories-section" class="section-content">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">Danh mục sản phẩm</h5>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#categoryModal" id="add-category-btn">
                                <i class="bi bi-plus-circle me-1"></i> Thêm danh mục
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="text" class="form-control" placeholder="Tìm kiếm danh mục..." id="search-categories">
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Tên danh mục</th>
                                            <th>Slug</th>
                                            <th>Số sản phẩm</th>
                                            <th>Ngày tạo</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="categories-list">
                                        <!-- Categories will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Orders Section -->
                <section id="orders-section" class="section-content">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">Quản lý đơn hàng</h5>
                            <div>
                                <button class="btn btn-outline-primary me-2" id="export-orders-btn">
                                    <i class="bi bi-file-earmark-excel me-1"></i> Xuất Excel
                                </button>
                                <button class="btn btn-outline-secondary" id="print-orders-btn">
                                    <i class="bi bi-printer me-1"></i> In
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="mb-3 d-flex justify-content-between align-items-center flex-wrap">
                                <div class="d-flex align-items-center mb-2">
                                    <label class="me-2">Trạng thái:</label>
                                    <select class="form-select form-select-sm" id="filter-order-status" style="width: 150px;">
                                        <option value="all">Tất cả</option>
                                        <option value="pending">Chờ xác nhận</option>
                                        <option value="processing">Đang xử lý</option>
                                        <option value="shipped">Đang giao</option>
                                        <option value="completed">Hoàn thành</option>
                                        <option value="cancelled">Đã hủy</option>
                                    </select>
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <label class="me-2">Từ ngày:</label>
                                    <input type="date" class="form-control form-control-sm" id="filter-from-date" style="width: 150px;">
                                    <label class="mx-2">Đến ngày:</label>
                                    <input type="date" class="form-control form-control-sm" id="filter-to-date" style="width: 150px;">
                                </div>
                                <div class="d-flex mb-2">
                                    <input type="text" class="form-control form-control-sm me-2" placeholder="Tìm kiếm đơn hàng..." id="search-orders">
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Mã đơn hàng</th>
                                            <th>Khách hàng</th>
                                            <th>Email/SĐT</th>
                                            <th>Ngày đặt</th>
                                            <th>Trạng thái</th>
                                            <th>Tổng tiền</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="orders-list">
                                        <!-- Orders will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <div class="text-muted" id="orders-showing-info">Hiển thị 1-10 trên 0 đơn hàng</div>
                                <div>
                                    <nav aria-label="Page navigation">
                                        <ul class="pagination pagination-sm" id="orders-pagination">
                                            <!-- Pagination will be generated here -->
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Revenue Section -->
                <section id="revenue-section" class="section-content">
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="card-title">Doanh thu theo thời gian</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3 d-flex">
                                        <select class="form-select me-2" id="revenue-period">
                                            <option value="daily">Theo ngày</option>
                                            <option value="monthly" selected>Theo tháng</option>
                                            <option value="yearly">Theo năm</option>
                                        </select>
                                        <button class="btn btn-primary" id="update-revenue-chart">Cập nhật</button>
                                    </div>
                                    <canvas id="revenue-time-chart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="card-title">Doanh thu theo danh mục</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3 d-flex">
                                        <input type="month" class="form-control me-2" id="revenue-month">
                                        <button class="btn btn-primary" id="update-category-revenue">Cập nhật</button>
                                    </div>
                                    <canvas id="category-revenue-chart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title">Báo cáo doanh thu</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3 d-flex align-items-center">
                                <label class="me-2">Chọn khoảng thời gian:</label>
                                <input type="date" class="form-control me-2" id="revenue-from-date">
                                <span class="me-2">đến</span>
                                <input type="date" class="form-control me-2" id="revenue-to-date">
                                <button class="btn btn-primary" id="generate-revenue-report">Tạo báo cáo</button>
                                <button class="btn btn-outline-primary ms-2" id="export-revenue-report">
                                    <i class="bi bi-file-earmark-excel me-1"></i> Xuất Excel
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>Thời gian</th>
                                            <th>Số đơn hàng</th>
                                            <th>Doanh thu</th>
                                            <th>Chi phí</th>
                                            <th>Lợi nhuận</th>
                                        </tr>
                                    </thead>
                                    <tbody id="revenue-report">
                                        <!-- Revenue report will be loaded here -->
                                    </tbody>
                                    <tfoot>
                                        <tr class="fw-bold">
                                            <td colspan="2">Tổng</td>
                                            <td id="total-orders-count">0</td>
                                            <td id="total-revenue">0 ₫</td>
                                            <td id="total-cost">0 ₫</td>
                                            <td id="total-profit">0 ₫</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title">Top sản phẩm bán chạy</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3 d-flex">
                                <select class="form-select me-2" id="top-products-period" style="width: 150px;">
                                    <option value="7days">7 ngày qua</option>
                                    <option value="30days" selected>30 ngày qua</option>
                                    <option value="90days">90 ngày qua</option>
                                    <option value="all">Tất cả thời gian</option>
                                </select>
                                <button class="btn btn-primary" id="update-top-products">Cập nhật</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>Sản phẩm</th>
                                            <th>Danh mục</th>
                                            <th>Số lượng bán</th>
                                            <th>Doanh thu</th>
                                            <th>% Doanh thu</th>
                                        </tr>
                                    </thead>
                                    <tbody id="top-products-list">
                                        <!-- Top products will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Users Section -->
                <section id="users-section" class="section-content">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">Quản lý người dùng</h5>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#userModal" id="add-user-btn">
                                <i class="bi bi-plus-circle me-1"></i> Thêm người dùng
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="mb-3 d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <label class="me-2">Quyền:</label>
                                    <select class="form-select form-select-sm" id="filter-user-role" style="width: 150px;">
                                        <option value="all">Tất cả</option>
                                        <option value="admin">Admin</option>
                                        <option value="user">Người dùng</option>
                                    </select>
                                </div>
                                <div class="d-flex">
                                    <input type="text" class="form-control form-control-sm me-2" placeholder="Tìm kiếm người dùng..." id="search-users">
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Họ và tên</th>
                                            <th>Email</th>
                                            <th>Quyền</th>
                                            <th>Ngày tạo</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="users-list">
                                        <!-- Users will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <div class="text-muted" id="users-showing-info">Hiển thị 1-10 trên 0 người dùng</div>
                                <div>
                                    <nav aria-label="Page navigation">
                                        <ul class="pagination pagination-sm" id="users-pagination">
                                            <!-- Pagination will be generated here -->
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <!-- Product Modal -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel">Thêm sản phẩm mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="product-form">
                        <input type="hidden" id="product-id">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="product-name" class="form-label">Tên sản phẩm <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="product-name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="product-category" class="form-label">Danh mục <span class="text-danger">*</span></label>
                                    <select class="form-select" id="product-category" required>
                                        <!-- Categories will be loaded here -->
                                    </select>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="product-price" class="form-label">Giá bán <span class="text-danger">*</span></label>
                                            <div class="input-group">
                                                <input type="number" class="form-control" id="product-price" min="0" required>
                                                <span class="input-group-text">₫</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="product-stock" class="form-label">Số lượng tồn</label>
                                            <input type="number" class="form-control" id="product-stock" min="0" value="0">
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="product-description" class="form-label">Mô tả sản phẩm</label>
                                    <textarea class="form-control" id="product-description" rows="4"></textarea>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="product-image" class="form-label">Hình ảnh sản phẩm</label>
                                    <div class="input-group mb-3">
                                        <input type="file" class="form-control" id="product-image" accept="image/*">
                                        <label class="input-group-text" for="product-image">Tải lên</label>
                                    </div>
                                    <div class="preview-container border rounded p-2 text-center">
                                        <img id="image-preview" src="/images/product-placeholder.jpg" alt="Hình ảnh sản phẩm" class="img-fluid" style="max-height: 200px;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                            <button type="submit" class="btn btn-primary">Lưu sản phẩm</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Category Modal -->
    <div class="modal fade" id="categoryModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="categoryModalLabel">Thêm danh mục mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="category-form">
                        <input type="hidden" id="category-id">
                        <div class="mb-3">
                            <label for="category-name" class="form-label">Tên danh mục <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="category-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="category-slug" class="form-label">Slug</label>
                            <input type="text" class="form-control" id="category-slug">
                            <div class="form-text">Slug sẽ tự động được tạo nếu để trống.</div>
                        </div>
                        <div class="mb-3">
                            <label for="category-description" class="form-label">Mô tả</label>
                            <textarea class="form-control" id="category-description" rows="3"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                            <button type="submit" class="btn btn-primary">Lưu danh mục</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- User Modal -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">Thêm người dùng mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="user-form">
                        <input type="hidden" id="user-id">
                        <div class="mb-3">
                            <label for="user-name" class="form-label">Họ và tên <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="user-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="user-email" class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="user-email" required>
                        </div>
                        <div class="mb-3">
                            <label for="user-password" class="form-label">Mật khẩu <span class="text-danger">*</span></label>
                            <input type="password" class="form-control" id="user-password" required>
                            <div class="form-text" id="password-help">Để trống nếu không muốn thay đổi mật khẩu.</div>
                        </div>
                        <div class="mb-3">
                            <label for="user-role" class="form-label">Quyền</label>
                            <select class="form-select" id="user-role">
                                <option value="user">Người dùng</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                            <button type="submit" class="btn btn-primary">Lưu người dùng</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Order Detail Modal -->
    <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="orderDetailModalLabel">Chi tiết đơn hàng #<span id="order-id-display"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6>Thông tin đơn hàng</h6>
                            <p>
                                <strong>Mã đơn hàng:</strong> <span id="order-id"></span><br>
                                <strong>Ngày đặt:</strong> <span id="order-date"></span><br>
                                <strong>Trạng thái:</strong> <span id="order-status"></span><br>
                                <strong>Phương thức thanh toán:</strong> <span id="order-payment-method"></span><br>
                                <strong>Phương thức vận chuyển:</strong> <span id="order-shipping-method"></span>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h6>Thông tin khách hàng</h6>
                            <p>
                                <strong>Tên khách hàng:</strong> <span id="customer-name"></span><br>
                                <strong>Email:</strong> <span id="customer-email"></span><br>
                                <strong>Số điện thoại:</strong> <span id="customer-phone"></span><br>
                                <strong>Địa chỉ:</strong> <span id="customer-address"></span>
                            </p>
                        </div>
                    </div>
                    
                    <h6>Chi tiết sản phẩm</h6>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Sản phẩm</th>
                                    <th>Đơn giá</th>
                                    <th>Số lượng</th>
                                    <th>Thành tiền</th>
                                </tr>
                            </thead>
                            <tbody id="order-items">
                                <!-- Order items will be loaded here -->
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="3" class="text-end"><strong>Tạm tính:</strong></td>
                                    <td id="order-subtotal">0 ₫</td>
                                </tr>
                                <tr>
                                    <td colspan="3" class="text-end"><strong>Phí vận chuyển:</strong></td>
                                    <td id="order-shipping">0 ₫</td>
                                </tr>
                                <tr>
                                    <td colspan="3" class="text-end"><strong>Giảm giá:</strong></td>
                                    <td id="order-discount">0 ₫</td>
                                </tr>
                                <tr>
                                    <td colspan="3" class="text-end"><strong>Tổng cộng:</strong></td>
                                    <td id="order-total" class="text-primary fw-bold">0 ₫</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    
                    <div class="mt-4">
                        <h6>Cập nhật trạng thái</h6>
                        <div class="row">
                            <div class="col-md-8">
                                <select class="form-select" id="update-order-status">
                                    <option value="pending">Chờ xác nhận</option>
                                    <option value="processing">Đang xử lý</option>
                                    <option value="shipped">Đang giao</option>
                                    <option value="completed">Hoàn thành</option>
                                    <option value="cancelled">Đã hủy</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" id="update-status-btn">Cập nhật</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" id="print-order-btn">
                        <i class="bi bi-printer me-1"></i> In đơn hàng
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteConfirmModalLabel">Xác nhận xóa</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="delete-confirm-message">Bạn có chắc chắn muốn xóa mục này không?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-btn">Xóa</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/admin.js"></script>
